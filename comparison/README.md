# Performance comparison

This folder contains some Rust implementation with (almost) same algorithm as the Haskell ones, focusing on slow (> 1s) solutions (Why are they slow? Is it the fault of algorithm or Haskell code or something else?)

Use `cargo-play` to run them.

## Day12

```console
> rustc -O day12.rs
> time ./day12
4964259839627

________________________________________________________
Executed in  433.64 millis    fish           external
   usr time  397.84 millis    0.00 micros  397.84 millis
   sys time   34.08 millis  704.00 micros   33.37 millis
```

[Haskell version](https://github.com/taoky/adventofcode/blob/7b3defeed2cfcb142c4c6efd90fa695662f85ddc/src/Day12.hs) (before manually using Haskell and rewrite the function) takes 10s, due to slow `Data.MemoCombinators`.

## Day16

```console
> rustc -O day16.rs
> time ./day16
8331

________________________________________________________
Executed in  378.33 millis    fish           external
   usr time  337.23 millis  587.00 micros  336.64 millis
   sys time   40.02 millis  135.00 micros   39.89 millis
```

[Haskell version](https://github.com/taoky/adventofcode/blob/8129a28d61f87001027311d358648c36030b79d6/src/Day16.hs) (before optimizing with Vector) takes 2.5s.

## Day22

```console
> rustc -O day22.rs
> time ./day22
522
83519

________________________________________________________
Executed in  372.63 millis    fish           external
   usr time  368.80 millis  653.00 micros  368.14 millis
   sys time    3.47 millis  184.00 micros    3.29 millis
```

[Haskell version before optimizing `fallenBlocks` calc](https://github.com/taoky/adventofcode/blob/8dcd08d219c6b8b65d6c6b7306acf7a33ad5b926/src/Day22.hs) takes ~1.4s.

## Day23

```console
> rustc -O day23.rs
> time ./day23
(0, 1) {(89, 41): [((65, 33), 120), ((77, 17), 144), ((87, 53), 38), ((101, 41), 28)], (107, 113): [((75, 103), 286), ((101, 89), 162), ((103, 131), 98), ((123, 99), 106)], (65, 33): [((35, 29), 166), ((57, 11), 110), ((55, 53), 110), ((89, 41), 120)], (55, 53): [((41, 65), 106), ((65, 33), 110), ((65, 75), 96), ((87, 53), 152)], (75, 87): [((65, 75), 62), ((87, 53), 218), ((75, 103), 60), ((101, 89), 140)], (103, 131): [((75, 133), 234), ((107, 113), 98), ((135, 137), 146)], (33, 129): [((17, 103), 542), ((31, 105), 134), ((65, 135), 206)], (75, 103): [((75, 87), 60), ((57, 113), 88), ((107, 113), 286), ((75, 133), 130)], (123, 99): [((131, 89), 22), ((107, 113), 106), ((135, 137), 362)], (65, 75): [((55, 53), 96), ((37, 81), 174), ((75, 87), 62), ((57, 113), 222)], (35, 29): [((7, 35), 170), ((33, 15), 56), ((41, 65), 210), ((65, 33), 166)], (37, 81): [((41, 65), 52), ((17, 75), 90), ((65, 75), 174), ((31, 105), 162)], (140, 139): [((135, 137), 7)], (19, 19): [((0, 1), 261), ((7, 35), 136), ((33, 15), 86)], (33, 15): [((19, 19), 86), ((35, 29), 56), ((57, 11), 236)], (87, 53): [((55, 53), 152), ((89, 41), 38), ((75, 87), 218), ((103, 55), 82)], (7, 35): [((19, 19), 136), ((35, 29), 170), ((11, 65), 226)], (57, 113): [((65, 75), 222), ((31, 105), 162), ((75, 103), 88), ((65, 135), 122)], (77, 17): [((57, 11), 150), ((89, 41), 144), ((103, 15), 244)], (75, 133): [((65, 135), 36), ((75, 103), 130), ((103, 131), 234)], (11, 65): [((7, 35), 226), ((41, 65), 162), ((17, 75), 92)], (103, 55): [((87, 53), 82), ((101, 41), 52), ((101, 89), 260), ((123, 61), 158)], (0, 1): [((19, 19), 261)], (17, 103): [((17, 75), 260), ((31, 105), 32), ((33, 129), 542)], (131, 89): [((123, 61), 276), ((101, 89), 146), ((123, 99), 22)], (65, 135): [((33, 129), 206), ((57, 113), 122), ((75, 133), 36)], (17, 75): [((11, 65), 92), ((37, 81), 90), ((17, 103), 260)], (129, 33): [((103, 15), 504), ((101, 41), 184), ((123, 61), 254)], (123, 61): [((129, 33), 254), ((103, 55), 158), ((131, 89), 276)], (57, 11): [((33, 15), 236), ((65, 33), 110), ((77, 17), 150)], (101, 89): [((75, 87), 140), ((103, 55), 260), ((107, 113), 162), ((131, 89), 146)], (103, 15): [((77, 17), 244), ((101, 41), 88), ((129, 33), 504)], (101, 41): [((89, 41), 28), ((103, 15), 88), ((103, 55), 52), ((129, 33), 184)], (41, 65): [((35, 29), 210), ((11, 65), 162), ((55, 53), 106), ((37, 81), 52)], (31, 105): [((37, 81), 162), ((17, 103), 32), ((57, 113), 162), ((33, 129), 134)], (135, 137): [((103, 131), 146), ((123, 99), 362), ((140, 139), 7)]}
Part 2: 6450

________________________________________________________
Executed in    3.15 secs    fish           external
   usr time    3.14 secs  547.00 micros    3.14 secs
   sys time    0.00 secs  145.00 micros    0.00 sec
```

Well... The DFS algorithm itself is slow and, well, this is an NP-hard problem.
